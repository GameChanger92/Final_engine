# Context for Story Generation

## Character Information
{% if characters %}
{% for char_id, char_info in characters.items() %}
**{{ char_info.name }}**: {{ char_info.background }}
- 특성: {{ char_info.traits | join(', ') }}
{% if char_info.relationships %}
- 관계: {{ char_info.relationships | join(', ') }}
{% endif %}
{% endfor %}
{% else %}
[Character Info: TO BE ADDED]
{% endif %}

## Previous Episode Summary
{% if previous_episode %}
{{ previous_episode }}
{% else %}
[Previous Episode: TO BE ADDED]
{% endif %}

## Similar Scenes (Vector Search Results)
{% if similar_scenes %}
{% for scene_id, similarity in similar_scenes %}
- {{ scene_id }} (유사도: {{ "%.2f"|format(similarity) }})
{% endfor %}
{% else %}
[Vector Search: TO BE ADDED]
{% endif %}

## Story Elements
{% if story_elements %}
- 테마: {{ story_elements.themes | join(', ') }}
- 톤: {{ story_elements.tone }}
- 장르: {{ story_elements.genre }}
{% endif %}

## Style Guidelines
{% if style %}
- 플랫폼: {{ style.platform }}
- 문체: {{ style.tone }}
- 주요 시점: {{ style.voice_main }}
- 보조 시점: {{ style.voice_side }}
- 줄바꿈 규칙: {{ style.enter_rule }}
{% endif %}

## Current Scenes
{% for scene in scenes %}
{{ loop.index }}. {{ scene }}
{% endfor %}